# --------ELAPTIC DESKTOP ENVIRONMENT--------
# REQUIRED MODULES:
pixel = __elaptic_registry__['pixel']
ansi = __elaptic_registry__['ansi']
asyncio = __elaptic_registry__['asyncio']
time = __elaptic_registry__['time']

def desktop_main():
    screen = pixel.Screen(32, 16)
    background = pixel.Bitmap(32, 32, ([0x010101]) * 32 * 32)  # black background fill
    background.set_position(0, 0)
    screen.add_sprite(background)

    icon1 = pixel.Bitmap(8, 8, [0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0xe60f0f, 0x000000, 0xe60f0f, 0xe60f0f, 0x000000, 0xe60f0f, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0xe60f0f, 0x000000, 0x404ace, 0x404ace, 0x000000, 0xe60f0f, 0x000000, 0x000000, 0xe60f0f, 0x000000, 0x404ace, 0x404ace, 0x000000, 0xe60f0f, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0xe60f0f, 0x000000, 0xe60f0f, 0xe60f0f, 0x000000, 0xe60f0f, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000])
    icon1.set_position(4,4)
    screen.add_sprite(icon1)
    # Create selector
    selector = pixel.Bitmap(8, 8, [0x00ff00, 0x00ff00, 0x00ff00, 0x00ff00, 0x00ff00, 0x00ff00, 0x00ff00, 0x00ff00, 0x00ff00, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x00ff00, 0x00ff00, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x00ff00, 0x00ff00, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x00ff00, 0x00ff00, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x00ff00, 0x00ff00, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x00ff00, 0x00ff00, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x00ff00, 0x00ff00, 0x00ff00, 0x00ff00, 0x00ff00, 0x00ff00, 0x00ff00, 0x00ff00, 0x00ff00])
    selector.set_position(4, 4)
    screen.add_sprite(selector)
    while True:
        print(f"\n\n\n\n{ansi.ansi['clear']}{screen.render()}")
        time.sleep(1)
